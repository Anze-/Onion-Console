<link rel="import" href="/lib/polymer/polymer.html">

<dom-module id="onion-settings-general">
	<style>
		.container {
			width: 600px;
			margin: 0 auto;
		}

		.card {
			margin-top: 15px;
			background-color: #fff;
		}
			.card .form-group:last-child {
				margin-bottom: 0;
			}
	</style>

	<template>

		<div class="container">
			<form id="settings">
				<h4>Basic Settings</h4>
				<div class="card card-block">
					<div class="form-group row">
						<label for="hostname" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Omega Name</label>
						<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
							<input type="text" class="form-control" id="hostname" autocomplete="off" value="{{hostname::input}}" />
						</div>
					</div>
					<div class="form-group row">
						<!-- Detected networks -->
						<label for="timezone" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Timezone</label>
						<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
							<select class="form-control c-select" id="timezone" autocomplete="off" value="{{timezone::input}}">
								<option value="GMT-12">GMT-12:00</option>
								<option value="GMT-11">GMT-11:00</option>
								<option value="GMT-10">GMT-10:00</option>
								<option value="GMT-9">GMT-09:00</option>
								<option value="GMT-8">GMT-08:00</option>
								<option value="GMT-8">GMT-08:00</option>
								<option value="GMT-7">GMT-07:00</option>
								<option value="GMT-6">GMT-06:00</option>
								<option value="GMT-5">GMT-05:00</option>
								<option value="GMT-4">GMT-04:00</option>
								<option value="GMT-3.5">GMT-03:30</option>
								<option value="GMT-3">GMT-03:00</option>
								<option value="GMT-2">GMT-02:00</option>
								<option value="GMT-1">GMT-01:00</option>
								<option value="GMT0">GMT+00:00</option>
								<option value="GMT+1">GMT+01:00</option>
								<option value="GMT+2">GMT+02:00</option>
								<option value="GMT+3">GMT+03:00</option>
								<option value="GMT+3.5">GMT+03:30</option>
								<option value="GMT+4">GMT+04:00</option>
								<option value="GMT+4.5">GMT+04:30</option>
								<option value="GMT+5">GMT+05:00</option>
								<option value="GMT+5.5">GMT+05:30</option>
								<option value="GMT+5.75">GMT+05:45</option>
								<option value="GMT+6">GMT+06:00</option>
								<option value="GMT+6.5">GMT+06:30</option>
								<option value="GMT+7">GMT+07:00</option>
								<option value="GMT+8">GMT+08:00</option>
								<option value="GMT+9">GMT+09:00</option>
								<option value="GMT+9.5">GMT+09:30</option>
								<option value="GMT+10">GMT+10:00</option>
								<option value="GMT+11">GMT+11:00</option>
								<option value="GMT+12">GMT+12:00</option>
								<option value="GMT+13">GMT+13:00</option>
							</select>
						</div>
					</div>
				</div>

				<br />

				<h4>Security Settings</h4>
				<div class="card card-block">
					<!-- check current root password -->
					<div class="form-group row">
						<label for="password-current" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Current Password</label>
						<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
							<input type="password" class="form-control" id="password-current" autocomplete="off" value="{{passwordCurrent::input}}" />
						</div>
					</div>
					<!-- new root password -->
					<div class="form-group row">
						<label for="password-new" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">New Password</label>
						<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
							<input type="password" class="form-control" id="password-new" autocomplete="off" value="{{passwordNew::input}}" />
						</div>
					</div>
					<!-- verify  password -->
					<div class="form-group row">
						<label for="password-new-verify" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Verify Password</label>
						<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
							<input type="password" class="form-control" id="password-new-verify" autocomplete="off" value="{{passwordNewVerify::input}}" />
						</div>
					</div>
				</div>

				<br />

				<div class="form-group row">
					<!-- save settings -->
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
					<button id="wifi-config-button" type="button" class="btn btn-success btn-block" on-click="setupWifi">Save Settings</button>
					</div>
				</div>
			</form>
		</div>


	</template>

	<script>
		'use strict';

		(function () {
			var onionSettingsGeneral = null,
				hostnameCopy,
				timezoneCopy;

			var ready = function () {
				onionSettingsGeneral = this;
			};

			var init = function () {
				onionConsole.getService('onion-ubus-provider', function (ubus) {
					ubus.request('uci', 'get', {
						config: 'system',
						section: '@system[0]',
						option: 'hostname'
					}, function (result) {
						if (result[0] === 0) {
							hostnameCopy = result[1].value;
							onionSettingsGeneral.hostname = result[1].value;
						}
					});

					ubus.request('uci', 'get', {
						config: 'system',
						section: '@system[0]',
						option: 'timezone'
					}, function (result) {
						if (result[0] === 0) {
							timezoneCopy = result[1].value;
							onionSettingsGeneral.timezone = result[1].value;
						}
					});
	            });
			};

			Polymer({
				is: 'onion-settings-general',
				ready: ready,
				init: init
			});
        })();
	</script>

</dom-module>
