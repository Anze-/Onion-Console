<link rel="import" href="/lib/polymer/polymer.html">
<link rel="import" href="/lib/iron-image/iron-image.html">
<link rel="import" href="/lib/iron-icons/iron-icons.html">
<link rel="stylesheet" type="text/css" href="animate.css">

<dom-module id="onion-notification">
	<style>
		:host * {
			-webkit-user-select: none;  /* Chrome all / Safari all */
			-moz-user-select: none;     /* Firefox all */
			-ms-user-select: none;      /* IE 10+ */
			user-select: none;          /* Likely future */
		}

		.notifications {
			display: block;
			position: fixed;
			height: 0;
			width: 0;
			top: 10px;
			right: 15px;
			overflow: visible;
		}

		.notifications-container {
			position: relative;
			height: 100%;
			width: 100%;
		}

		.notification {
			position: relative;
			width: 250px;
			border: 1px solid #fff;
			background: rgba(255, 255, 255, 0.95);
			border-radius: 3px;
			padding: 10px;
			margin-bottom: 5px;
			z-index: 10000;
			margin-left: -250px;
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
		}

		.notification p {
			word-wrap: break-word;
		}
			.notification p:last-child {
				margin-bottom: 0;
			}
	</style>

	<template>
		<div class="notifications">
				<template is='dom-repeat' items="{{notificationList}}">
					<div class="notification animated fadeInRight" id="{{item.id}}">
						<h6 class="title">{{item.title}}</h6>
						<!-- <a href="#" class="close" on-click>&times;</a> -->
						<p>{{item.message}}</p>
					</div>
				</template>
		</div>
	</template>

	<script>
		'use strict';

		(function () {
			var notify = function (n) {
				n.id = 'notification-' + (this.idCount++);
				this.push('notificationList', n);
				setTimeout((function () {
					var elem = document.getElementById(this.notificationList[0].id);
					elem.className = elem.className + ' fadeOutRight';
					this.notificationList.shift('notificationList');
				}).bind(this), 5000);
			};

			Polymer({
				is: 'onion-notification',
				notify: notify,
				properties: {
					notificationList: {
						type: Array,
						value: [],
						notify: true
					}
				}
			});
		})();
	</script>

</dom-module>
